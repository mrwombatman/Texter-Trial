{var browser_polyfill;"undefined"!=typeof browser?browser_polyfill=browser:"undefined"!=typeof chrome&&(browser_polyfill=chrome);const a=new URLSearchParams(window.location.search);let r=a.get("permissions");if(r)try{r=JSON.parse(r)}catch(e){console.error(e),r=void 0}const c=async()=>{var o='Sorry, this permission is required in order for Bulk Texter Pro to function.\n\nPlease click the "Authorize" button.';try{var e={origins:["https://app.bulktexterpro.com/*"]},t=(r?.origins?.length&&(e.origins=[...e.origins,...r?.origins]),await browser_polyfill.permissions.request(e));if(t)return f();alert(o)}catch(e){alert(o)}},d=()=>{var e=document.querySelector("body");e&&(e.style.display="flex")},e=()=>{var e;document.getElementById("permissions-issue").style.display="block",document.getElementById("authorize-button").onclick=c,r&&(document.getElementById("app-permissions-link").style.display="none",(e=document.getElementById("permissions-url")).innerText=r?.origins.join(",")||e.innerText),d()},f=()=>{document.getElementById("permissions-issue").style.display="none",document.getElementById("redirect").style.display="block",window.location.href="https://app.bulktexterpro.com",setTimeout(d,1e3)},g=(document.getElementById("authorize-button").onclick=c,async()=>{((await browser_polyfill.permissions.getAll())?.origins?.includes("https://app.bulktexterpro.com/*")&&!r?f:e)()});g()}

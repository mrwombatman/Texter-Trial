{let r={dataset:{enabled:"true",blur:"true",focus:"true",mouseleave:"true",mouseout:"true",visibility:"true",pointercapture:"true",hidden:"true"}};Object.defineProperty(document,"mozHidden",{get(){return!1}});const b=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},c=(Object.defineProperty(document,"visibilityState",{get(){return"false"===r.dataset.enabled&&"true"===r.dataset.hidden?"hidden":"visible"}}),Object.defineProperty(document,"webkitVisibilityState",{get(){return"false"===r.dataset.enabled&&"true"===r.dataset.hidden?"hidden":"visible"}}),{focus:!0,visibilitychange:!0,webkitvisibilitychange:!0}),d=(document.addEventListener("visibilitychange",e=>{if("true"===r.dataset.enabled&&"false"!==r.dataset.visibility){if(!c.visibilitychange)return b(e);c.visibilitychange=!1}},!0),document.addEventListener("webkitvisibilitychange",e=>{if("true"===r.dataset.enabled&&"false"!==r.dataset.visibility){if(!c.webkitvisibilitychange)return b(e);c.webkitvisibilitychange=!1}},!0),window.addEventListener("pagehide",e=>{"true"===r.dataset.enabled&&"false"!==r.dataset.visibility&&b(e)},!0),window.addEventListener("lostpointercapture",e=>{"true"===r.dataset.enabled&&"false"!==r.dataset.pointercapture&&b(e)},!0),Object.defineProperty(document,"hidden",{get(){return"false"===r.dataset.enabled&&"true"===r.dataset.hidden}}),Object.defineProperty(document,"webkitHidden",{get(){return"false"===r.dataset.enabled&&"true"===r.dataset.hidden}}),Document.prototype.hasFocus=new Proxy(Document.prototype.hasFocus,{apply(e,t,a){return"true"===r.dataset.enabled&&"false"!==r.dataset.focus||Reflect.apply(e,t,a)}}),e=>{if("true"===r.dataset.enabled&&"false"!==r.dataset.focus&&(e.target===document||e.target===window)){if(!c.focus)return b(e);c.focus=!1}}),e=(document.addEventListener("focus",d,!0),window.addEventListener("focus",d,!0),e=>{if("true"===r.dataset.enabled&&"false"!==r.dataset.blur&&(e.target===document||e.target===window))return b(e)});document.addEventListener("blur",e,!0),window.addEventListener("blur",e,!0),window.addEventListener("mouseleave",e=>{if("true"===r.dataset.enabled&&"false"!==r.dataset.mouseleave&&(e.target===document||e.target===window))return b(e)},!0),window.addEventListener("mouseout",e=>{if("true"===r.dataset.enabled&&"false"!==r.dataset.mouseout&&(e.target===document.documentElement||e.target===document.body))return b(e)},!0);let s=0;window.requestAnimationFrame=new Proxy(window.requestAnimationFrame,{apply(e,t,a){var i,n,d;return"true"===r.dataset.enabled&&"true"===r.dataset.hidden?(i=Date.now(),n=Math.max(0,16-(i-s)),d=setTimeout(function(){a[0](performance.now())},n),s=i+n,d):Reflect.apply(e,t,a)}}),window.cancelAnimationFrame=new Proxy(window.cancelAnimationFrame,{apply(e,t,a){return"true"===r.dataset.enabled&&"true"===r.dataset.hidden&&clearTimeout(a[0]),Reflect.apply(e,t,a)}})}
